# 测试提现信息保存功能

## 🔨 第一步：重新编译并安装APP

```bash
cd /Users/yy/Documents/GitHub/jianfengchazhen/android
./build.sh
```

选择 `y` 自动安装到设备。

---

## 📱 第二步：测试流程

### 1️⃣ 首次提现

1. 打开APP
2. 进入提现页面
3. 输入：
   - 支付宝账号：`18888888888`
   - 真实姓名：`测试用户`
4. 选择金额：`0.5元`
5. 点击"提交申请"
6. 等待提交成功

### 2️⃣ 验证信息保存

1. **返回首页**
2. **再次进入提现页面**
3. **✅ 检查：支付宝账号和真实姓名应该自动填充了！**

---

## 🐛 第三步：查看日志（调试）

在另一个终端运行：

```bash
adb logcat -s WithdrawInfoManager:D WithdrawViewModel:D | grep -E "(保存|读取|加载)"
```

### 预期日志输出

**首次提交时：**
```
WithdrawViewModel: 提现成功，保存提现信息到本地
WithdrawInfoManager: 保存提现信息: alipay=18888888888, name=测试用户
WithdrawInfoManager: 提现信息保存成功
WithdrawViewModel: 提现信息已保存，下次将自动填充
```

**第二次打开提现页面时：**
```
WithdrawInfoManager: 读取保存的支付宝账号: 18888888888
WithdrawInfoManager: 读取保存的真实姓名: 测试用户
WithdrawViewModel: 从本地加载提现信息: alipay=18888888888, name=测试用户
WithdrawViewModel: UI状态已更新，提现信息已填充
```

---

## ✅ 成功标志

如果功能正常，你应该看到：
1. ✅ 第二次打开提现页面时，支付宝账号自动填充为 `18888888888`
2. ✅ 真实姓名自动填充为 `测试用户`
3. ✅ 只需选择金额，不用重新输入账号信息
4. ✅ 日志中能看到"读取保存的支付宝账号"和"读取保存的真实姓名"

---

## ❌ 如果没有生效

### 检查1：确认是新版本
```bash
adb shell pm list packages | grep needleinsert
adb shell pm dump com.game.needleinsert | grep versionName
```

### 检查2：清除旧数据重新安装
```bash
adb uninstall com.game.needleinsert
./gradlew installDebug
```

### 检查3：查看完整日志
```bash
adb logcat -s WithdrawInfoManager:D WithdrawViewModel:D WithdrawScreen:D
```

---

## 📝 其他功能

### 清除保存的提现信息
如果需要清除保存的信息，可以在APP设置中"清除数据"，或者卸载重装。

### 修改保存的信息
直接在提现页面修改账号和姓名，下次提交时会更新保存的信息。

---

## 🎯 快速验证命令

一键执行所有步骤：

```bash
# 1. 编译
cd /Users/yy/Documents/GitHub/jianfengchazhen/android && ./gradlew installDebug

# 2. 启动日志监控
adb logcat -s WithdrawInfoManager:D WithdrawViewModel:D
```

然后在APP中测试提现功能即可！

