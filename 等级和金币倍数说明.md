# 等级和金币倍数系统说明

## 📊 系统工作原理

### 金币计算公式
```
最终金币 = 基础金币 × 等级倍数
```

### 示例
假设：
- **广告A** 的基础奖励设置为 **100** 金币
- **用户A** 是 **1级**（广告倍数 1.0）
- **用户B** 是 **6级**（广告倍数 2.5）

计算结果：
- 用户A 看广告A：100 × 1.0 = **100 金币**
- 用户B 看广告A：100 × 2.5 = **250 金币**

---

## 🎯 如何设置不同账号获得不同金币

### 方案1：通过等级倍数控制（推荐）

**适用场景**：希望高等级用户获得更多奖励

**操作步骤**：
1. 进入 **后台管理 > 等级管理**
2. 编辑目标等级（如6级）
3. 修改 **广告金币倍数**

**示例配置**：
| 账号 | 等级 | 广告倍数 | 基础100金币 | 实际获得 |
|------|------|----------|-------------|----------|
| A账号 | 1级  | 1.0      | 100         | 100金币  |
| B账号 | 6级  | 10.0     | 100         | 1000金币 |
| C账号 | 6级  | 20.0     | 100         | 2000金币 |

**优点**：
- 批量管理：所有6级用户都享受相同倍数
- 层次分明：形成等级梯度，鼓励用户升级

---

### 方案2：通过广告基础金币控制

**适用场景**：希望不同广告给不同奖励

**操作步骤**：
1. 进入 **后台管理 > 广告管理**
2. 编辑目标广告
3. 修改 **奖励金币**

**示例配置**：
| 广告名称 | 基础金币 | 6级倍数2.5 | 6级实际获得 |
|----------|----------|-----------|-------------|
| 淘宝广告 | 400      | ×2.5      | 1000金币    |
| 京东广告 | 800      | ×2.5      | 2000金币    |
| 奔驰广告 | 1200     | ×2.5      | 3000金币    |

**优点**：
- 灵活：不同广告可以设置不同价值
- 统一：所有等级用户都会按比例增加

---

## 🔧 两个倍数的区别

### 1. 广告金币倍数（ad_coin_multiplier）
- **作用**：用户**看广告**时的金币倍数
- **应用场景**：观看视频广告、网页广告
- **计算公式**：`广告奖励 = 广告基础金币 × 广告金币倍数`

### 2. 游戏金币倍数（game_coin_multiplier）
- **作用**：用户**玩游戏**时的金币倍数
- **应用场景**：完成游戏关卡
- **计算公式**：`游戏奖励 = 游戏基础金币 × 游戏金币倍数`

**为什么要分开？**
- 精细控制：可以让高等级用户在看广告时获得更多倍数，但游戏倍数相对较低
- 例如6级用户：广告倍数2.5，游戏倍数1.8
  - 看广告更划算 → 鼓励用户多看广告
  - 玩游戏也有奖励 → 保持游戏趣味性

---

## 💰 实际配置建议

### 当前问题
您的配置：
- 广告基础金币：5-15 金币（**太低**）
- 6级广告倍数：2.5
- 实际获得：5 × 2.5 = 12.5 金币（**太少**）

### 建议方案A：提高基础金币
```
修改广告配置：
- 淘宝广告：5 → 400 金币
- 京东广告：8 → 500 金币
- 奔驰广告：10 → 600 金币

结果（6级用户）：
- 看淘宝：400 × 2.5 = 1000 金币
- 看京东：500 × 2.5 = 1250 金币
- 看奔驰：600 × 2.5 = 1500 金币
```

### 建议方案B：提高等级倍数
```
修改6级配置：
- 广告倍数：2.5 → 100.0

结果（保持广告基础金币不变）：
- 看淘宝（基础5）：5 × 100 = 500 金币
- 看京东（基础8）：8 × 100 = 800 金币
- 看奔驰（基础10）：10 × 100 = 1000 金币
```

### 建议方案C：组合方案（最佳）
```
1. 提高基础金币（所有人受益）：
   - 广告基础：100-300 金币

2. 设置合理的等级倍数（拉开差距）：
   - 1级：1.0倍
   - 2级：1.5倍
   - 3级：2.0倍
   - 4级：3.0倍
   - 5级：5.0倍
   - 6级：10.0倍

3. 特殊账号（手动调整等级）：
   - A账号需要1000金币/广告 → 设为6级（100×10=1000）
   - B账号需要2000金币/广告 → 设为6级，把6级倍数改为20.0
```

---

## 🎮 如何给特定账号设置金币

### 步骤1：确定账号的用户ID
在后台管理 > 用户管理中查看

### 步骤2：设置该账号的等级
```sql
-- 例如把用户ID=123的账号设置为6级
UPDATE users SET level = 6 WHERE id = 123;
```

或在后台用户管理界面手动修改

### 步骤3：调整该等级的倍数
进入 **后台管理 > 等级管理**，编辑6级配置：
- 广告金币倍数：设为目标倍数（如10.0或20.0）

### 步骤4：验证
该账号看广告时应该获得：
```
实际金币 = 广告基础金币 × 等级倍数
```

---

## ❓ 常见问题

### Q1: 为什么我设置了等级，但金币还是很少？
**A**: 检查广告的**基础金币**设置。如果基础金币只有5，即使倍数是10，也只有50金币。

### Q2: 怎么让A账号1000金币，B账号2000金币？
**A**: 两种方式：
1. **不同等级**：A设为5级(倍数5.0)，B设为6级(倍数10.0)，广告基础200金币
   - A: 200×5=1000
   - B: 200×10=2000

2. **相同等级，修改倍数**：都设为6级，但为B单独调高6级倍数
   - 这会影响所有6级用户，不推荐

### Q3: 游戏金币倍数有什么用？
**A**: 控制用户玩游戏获得的金币。当前游戏基础奖励是5金币/局：
- 1级用户（倍数1.0）：5×1.0 = 5金币/局
- 6级用户（倍数1.8）：5×1.8 = 9金币/局

### Q4: 倍数可以设置多大？
**A**: 数据库限制是 `DECIMAL(10, 2)`，最大可以设到 **99999999.99**
建议范围：1.0 - 100.0（太大会破坏游戏平衡）

---

## 🔍 调试技巧

### 查看用户当前等级和金币
```sql
SELECT id, nickname, level, coins, experience FROM users WHERE id = 你的用户ID;
```

### 查看等级配置
```sql
SELECT level, level_name, ad_coin_multiplier, game_coin_multiplier 
FROM user_level_configs 
ORDER BY level;
```

### 查看广告配置
```sql
SELECT id, name, reward_coins, daily_limit, status FROM ad_configs;
```

### 查看最近的广告观看记录
```sql
SELECT u.nickname, a.name, awr.reward_coins, awr.watch_time 
FROM ad_watch_records awr
JOIN users u ON awr.user_id = u.id
JOIN ad_configs a ON awr.ad_id = a.id
ORDER BY awr.watch_time DESC
LIMIT 10;
```

---

## 📞 需要帮助？

如果还有疑问，请提供：
1. 用户ID
2. 期望获得的金币数量
3. 是否希望只影响该用户，还是该等级所有用户

我会帮您计算最佳配置方案。

